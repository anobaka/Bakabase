[git]
conventional_commits = true
filter_unconventional = false
topo_order = false
protect_breaking_commits = true
link_parsers = [
  { pattern = "#(\\d+)", href = "https://github.com/anobaka/Bakabase/issues/$1"}
]
filter_commits = false

commit_parsers = [
  { message = ".*", group = "Changes" },
]

# [remote.github]
# owner = "anobaka"
# repo  = "Bakabase"
# token = "GITHUB_TOKEN"

[changelog]
header = ""
body = """
{#- Output issues grouped by labels (from extra.labelGroups) -#}
{%- if extra.labelGroups is defined -%}
{%- for label in extra.labelOrder -%}
{%- set group = extra.labelGroups[label] -%}
{%- if group.issues | length > 0 %}
### {{ group.emoji }} {{ group.title }}
{% for issue in group.issues %}
- [#{{ issue.number }}]({{ issue.url }}) {{ issue.title }}
{%- endfor %}
{% endif -%}
{%- endfor -%}
{%- endif -%}

{#- Fallback: show commits without linked issues -#}
{%- set orphan_commits = [] -%}
{%- for commit in commits -%}
{%- if commit.extra is not defined or commit.extra.issues is not defined or commit.extra.issues | length == 0 -%}
{%- set_global orphan_commits = orphan_commits | concat(with=[commit]) -%}
{%- endif -%}
{%- endfor -%}
{%- if orphan_commits | length > 0 %}
### ğŸ“ Other Changes
{% for commit in orphan_commits %}
- {{ commit.message | split(pat="\n") | first | upper_first }} ([{{ commit.id | truncate(length=7, end="") }}](https://github.com/anobaka/Bakabase/commit/{{ commit.id }}))
{%- endfor %}
{% endif %}
{% if version %}
### ä¸‹è½½åœ°å€
- å¯é€šè¿‡ç¨‹åºå†…ã€ç³»ç»Ÿã€‘-ã€é…ç½®ã€‘ç•Œé¢ä¸€é”®æ›´æ–°
- å®Œæ•´å®‰è£…åŒ…ä¸‹è½½:
  - é€šè¿‡é˜¿é‡Œäº‘CDNä¸‹è½½: https://cdn-public.anobaka.com/app/bakabase/inside-world/{{ version | trim }}/installer/bakabase.zip
  - é€šè¿‡Githubä¸‹è½½: é€šè¿‡é™„ä»¶ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„å‹ç¼©åŒ…å³å¯ã€‚
{% endif %}
"""
footer = ""
trim = false